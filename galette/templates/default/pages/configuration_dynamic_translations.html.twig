{#
/**
 * Copyright Â© 2003-2024 The Galette Team
 *
 * This file is part of Galette (https://galette.eu).
 *
 * Galette is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Galette is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Galette. If not, see <http://www.gnu.org/licenses/>.
 */
#}
{% extends (mode == 'ajax') ? "ajax.html.twig" : "page.html.twig" %}

{% block content %}
{% if trans is defined and trans|length > 0 %}
        <form action="{{ url_for('editDynamicTranslation') }}" method="post" enctype="multipart/form-data" class="ui equal width form">
    {% if not exists %}
            <div class="ui icon info visible message">
                <i class="info circle blue icon" aria-hidden="true"></i>
                <div class="content">
                    {{ _T("No translation for '%s'!<br/>Please fill and submit the form below to create it.")|replace({'%s': text_orig|escape})|raw }}
                </div>
                <input type="hidden" name="new" value="true"/>
            </div>
    {% endif %}
    {% if exists and mode != 'ajax' %}
            <div class="ui basic fitted segment">
                <strong>{{ _T("Original text:") }}</strong>
                <div id="label-selection" class="ui right labeled basic icon dropdown button tooltip" title="{{ _T("Choose label to translate") }}">
                    <input type="hidden" name="filters">
                    <i class="dropdown icon"></i>
                    <span class="text">{{ text_orig }}</span>
                    <div class="menu">
                        <div class="ui icon search input">
                            <i class="search icon"></i>
                            <input type="text"/>
                        </div>
                        <div class="scrolling menu">
                            {% for sum, value in orig %}
                                <a class="item" href="{{ url_for('dynamicTranslation', {"text_orig_sum": sum}) }}">{{ value }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
    {% else %}
            <strong>{{ _T("Original text:") }} {{ text_orig }}</strong>
    {% endif %}
            <table class="ui striped definition table">
    {% for k, text in trans %}
                <tr>
                    <th class="collapsing"><label for="text_trans_{{ text.key }}">{{ text.name }}</label></th>
                    <td>
                        <input type="text" name="text_trans_{{ text.key }}" id="text_trans_{{ text.key }}" value="{% if text.text %}{{ text.text|escape }}{% endif %}"/>
                    </td>
                </tr>
    {% endfor %}
            </table>
            <input type=hidden name="text_orig" value="{{ text_orig|escape }}"/>
    {% if mode != 'ajax' %}
            <div class="ui basic center aligned segment">
                <button type="submit" name="trans" class="ui labeled icon primary button action">
                    <i class="save icon" aria-hidden="true"></i> {{ _T("Save") }}
                </button>
            </div>
    {% else %}
            <input type="hidden" name="trans" id="trans" value="true"/>
            <input type="hidden" name="redirect_uri" id="redirect_uri" value=""/>
    {% endif %}
                {% include "components/forms/csrf.html.twig" %}
        </form>
{% else %}
        <p>{{ _T("No fields to translate.") }}</p>
{% endif %}
{% endblock %}
