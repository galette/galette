{% if selector is not defined %}
    {% set selector = '.delete' %}
{% endif %}
{% if deleteurl is not defined %}
    {% set deleteurl = "_this.attr('href')" %}
{% endif %}
        //handle removals
        $('{{ selector }}').off('click').on('click', function(event) {
            event.preventDefault();
            var _this = $(this);

{% if extra_check is defined %}
            {{ extra_check }}
{% endif %}
{% if method is not defined %}
    {% set method = 'GET' %}
{% endif %}
            $.ajax({
                url: {{ deleteurl|raw }},
                type: "{{ method }}",
                data: {
                    ajax: true,
{% if extra_data is defined %}
                    {{ extra_data }}
{% endif %}
                },
                datatype: 'json',
                {% include 'elements/js/loader.js.twig' %},
                success: function(res){
                    var _res = $(res);
                    _res.find('#btncancel')
                        .button()
                        .on('click', function(e) {
                            e.preventDefault();
                            _res.dialog('close');
                        });

                    _res.find('input[type=submit]')
                        .button();

                    _res.find('form').on('submit', function(e) {
                        e.preventDefault();
                        var _form = $(this);
                        var _data = _form.serialize();
                        $.ajax({
                            url: _form.attr('action'),
                            type: "POST",
                            data: _data,
                            datatype: 'json',
                            {% include 'elements/js/loader.js.twig' %},
                            success: function(res){
                                if (res.success) {
                                    window.location.href = _form.find('input[name=redirect_uri]').val();
                                } else {
                                    $.ajax({
                                        url: '{{ path_for("ajaxMessages") }}',
                                        method: "GET",
                                        success: function (message) {
                                            $('#asso_name').after(message);
                                        }
                                    });
                                }
                            },
                            error: function() {
                                alert('{{ _T("An error occurred :(")|e("js") }}');
                            }
                        });
                    });

                    $('body').append(_res);

                    _res.dialog({
                        width: '25em',
                        modal: true,
                        close: function(event, ui){
                            $(this).dialog('destroy').remove()
                        }
                    });
                },
                error: function() {
                    alert('{{ _T("An error occurred :(")|e("js") }}');
                }
            });
        });
